#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
AGENT_SCRIPT="$SCRIPT_DIR/agent"

# Friendly deprecation; keeps logs/automation working while encouraging migration.
cat >&2 <<'MSG'
[WARN] ./scripts/agents is deprecated and will be removed in a future release.
       This shim forwards arguments to ./scripts/agent. Please switch your tooling.
MSG

if [[ ! -x "$AGENT_SCRIPT" ]]; then
  echo "[ERROR] Expected $AGENT_SCRIPT to exist and be executable." >&2
  exit 2
fi

# Exec the new canonical script with all args (preserves PID/exit semantics)
exec "$AGENT_SCRIPT" "$@"
